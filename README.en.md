# My EcoWatt by RTE for Home Assistant

Component to expose Ecowatt levels for the foreseable future. See https://www.monecowatt.fr/ for web access.

The integration optionaly exposes load shedding information via Enedis website. This feature is opt-in because it shares localization information via a 3rd party website. It is activated via /config/integrations page (click on "Configure" button next to the RTE Ecowatt card).

## Installation

Use [hacs](https://hacs.xyz/).
[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=kamaradclimber&repository=rte-ecowatt&category=integration)

## Configuration

### Get api access for RTE APIs

- Create an account on [RTE API website](https://data.rte-france.com/web/guest)
- Register to the [Ecowatt API](https://data.rte-france.com/catalog/-/api/consumption/Ecowatt/v4.0) and click on "Abonnez-vous Ã  l'API", create a new application
- get the `client_id` and `client_secret` (uuid in both cases)

### Configure home-assistant

The preferred configuration method is to use the UI.

![image info](/img/integration.png)

![image info](/img/credential.png)

![image info](/img/success.png)

![image info](/img/check.png)

You can configure two types of sensors:
- `hours` sensors to look at ecowatt level X hours in the future. You can look up to 96h at the moment.
- `days` sensors to look at ecowatt level X days in the future. You can look up to 3d in advance at the moment. The `days` sensor value is the worst of all hours of that day.

![image info](/img/sensor.png)

Two sensors are generated by default: "now" (0 hours in advance) and "today" (0 days in advance).

An additional sensor exposing next downgraded period is also added by default (not configurable). It shows beginning of next period with tensions on the electricity network. During such a period, it shows the beginning of next hour.
